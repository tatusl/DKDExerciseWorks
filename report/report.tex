%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% University/School Laboratory Report
% LaTeX Template
% Version 3.1 (25/3/14)
%
% This template has been downloaded from:
% http://www.LaTeXTemplates.com
%
% Original author:
% Linux and Unix Users Group at Virginia Tech Wiki 
% (https://vtluug.org/wiki/Example_LaTeX_chem_lab_report)
%
% License:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%----------------------------------------------------------------------------------------
%	PACKAGES AND DOCUMENT CONFIGURATIONS
%----------------------------------------------------------------------------------------

\documentclass[12pt]{article}

\usepackage[hmargin=3cm, vmargin=2cm]{geometry} % set margins

\usepackage{graphicx} % Required for the inclusion of images
\usepackage{natbib} % Required to change bibliography style to APA
%\usepackage{amsmath} % Required for some math elements 
\usepackage[utf8]{inputenc} % Use UTF-8
\usepackage{float}
\usepackage{booktabs}

\setlength\parindent{0pt} % Removes all indentation from paragraphs

\graphicspath{{images/}} % Define graphics path

\renewcommand{\labelenumi}{\alph{enumi}.} % Make numbering in the enumerate environment by letter rather than number (e.g. section 6)

\renewcommand{\baselinestretch}{1.5} % set line spacing

\usepackage{times} % Uncomment to use the Times New Roman font

%----------------------------------------------------------------------------------------
%	DOCUMENT INFORMATION
%----------------------------------------------------------------------------------------

\title{Data Analysis and Knowledge Discovery \\ Exercise Work 1} % Title

\author{Tatu Sepp√§-Lassila} % Author name

\date{\today} % Date for the report

\begin{document}

\maketitle % Insert the title, author and date

%----------------------------------------------------------------------------------------
%	SECTIONS
%----------------------------------------------------------------------------------------
 
\section{Task 1: Histograms}

Histograms were plotted using python and matplotlib. Freedman-Diaconis rule, Sturges' rule and Square-root choice was used to calculate the number of bins in the histograms. These three histograms were plotted for all of the attributes. However, only plots for alcohol are shown in this documents to demonstrate the results. 

% Histogram, Freedman Diaconis
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{alcohol_fdr}
    \caption{Histogram of alcohol attribute. Number of bins selected with Freedman-Diaconis rule.}
    \label{fig:histogram_fdr}
\end{figure}
% End of picture

% Histogram, Freedman Diaconis
\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{alcohol_src}
    \caption{Histogram of alcohol attribute. Number of bins selected with Square-root choice.}
    \label{fig:histogram_src}
\end{figure}
% End of picture

% Histogram, Sturges' rule
\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{alcohol_sturge}
    \caption{Histogram of alcohol attribute. Number of bins selected with Sturges' rule.}
    \label{fig:histogram_sturge}
\end{figure}
% End of picture

Figures \ref{fig:histogram_fdr}, \ref{fig:histogram_src}, \ref{fig:histogram_sturge} show the plotted histograms for alcohol attribute. Square-root choice produced 70 bins with this dataset. Respectively, Freedman-Diaconis rule produced 28 bins and Sturges' 14 bins. Histograms with lower number of bins show that majority of samples have alcohol around 10. Figure \ref{fig:histogram_src} shows that higher number of bins reveal that some tenths have very low number of samples, even though the next tenth has 50 or more samples.%

\section{Task 2: Scatter Plots and Parallel Coordinates Representation}

\subsection{Scatter plots}

Scatter plots were produced using matplotlib's scatter function. Attributes were plotted against each other, but only three were added to this document.

% Scatter plot, density and sulphates
\begin{figure}[H]
    \centering
    \includegraphics[width=0.9\textwidth]{scatter_plot_density_sulphates}
    \caption{Scatter plot of density and sulphates}
    \label{fig:scatter_dens_sulph}
\end{figure}
% End of picture

% Scatter plot, ph and alcohol
\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{scatter_plot_pH_alcohol}
    \caption{Scatter plot of pH and alcohol}
    \label{fig:scatter_ph_alc}
\end{figure}
% End of picture

% Scatter plot, residual sugar and free sulfur dioxide
\begin{figure}[H]
    \centering
    \includegraphics[width=0.85\textwidth]{scatter_plot_residual_sugar_free_sulfur_dioxide}
    \caption{Scatter plot of residual sugar and free sulfur dioxide}
    \label{fig:scatter_rs_fsd}
\end{figure}
% End of picture

Figure \ref{fig:scatter_dens_sulph} shows how samples are omitted to make the density variations more visible. Figure \ref{fig:scatter_ph_alc} shows how samples have quite evenly scattered pH values relative to alcohol. Figure \ref{fig:scatter_rs_fsd} shows some outliers.

\subsection{Parallel coordinates representation}

Parallel coordinates representation were plotted with pandas' parallel\_coordinates method. The samples are plotted against quality attribute.

% Parallel, raw
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{parallel_raw}
    \caption{Parallel coordinates representation with raw data values}
    \label{fig:parallel_raw}
\end{figure}
% End of picture

% Parallel, scaled
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{parallel_scaled}
    \caption{Parallel coordinates representation with scaled data values}
    \label{fig:parallel_scaled}
\end{figure}
% End of picture

% Parallel, scaled, subsample
\begin{figure}[H]
    \centering
    \includegraphics[width=1\textwidth]{parallel_scaled_subsample}
    \caption{Parallel coordinates representation with scaled data values. Number of samples is limited to 1500}
    \label{fig:parallel_scaled_subsample}
\end{figure}
% End of picture

The method does not allow attributes to be scaled independently. Figure \ref{fig:parallel_raw} shows the plotted figure and it can be seen that this figure is not very useful for data understanding. That is why the data values were scaled, which can be seen in Figure \ref{fig:parallel_scaled}. Figure \ref{fig:parallel_scaled_subsample} shows the same image with number of samples limited to 1500 to provide a bit clearer picture.

\section{Task 3: Principal Component Analysis}

PCA component analysis was done using numpy's cov method to calculate covariance matrix and linalg.eig to calculate eigen vectors and eigen values. The figure was done using matplotlib's plot method.

% PCA, raw
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{pca_raw}
    \caption{PCA with raw data}
    \label{fig:pca_raw}
\end{figure}
% End of picture

% PCA, normalized
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{pca_normalized}
    \caption{PCA with z-score normalized data}
    \label{fig:pca_normalized}
\end{figure}
% End of picture

Figure \ref{fig:pca_raw} shows scatter plot of the first two principal components computed with raw data. Figure \ref{fig:pca_normalized} shows the same scatter plot with normalized data. With normalization, the scatter plot shows more rounded figure compared to raw data which has kind of triangle shape.

\section{Task 4: 2D Multidimensional Scaling}

2D MDS was calculated with MDS function from scikit-learn. The figure was done using matplotlib's plot method.

% 2D MDS
\begin{figure}[H]
    \centering
    \includegraphics[width=0.8\textwidth]{2d_mds}
    \caption{2D MDS}
    \label{fig:mds}
\end{figure}
% End of picture

Figure \ref{fig:mds} shows 2D MDS scatter plot. The figure has some resemblence to PCA scatter plot with raw data as data points are more scattered on the direction of x-axis. 2D MDS scatter plot shows negative correlation between the dimensions, whereas this is not visible in PCA scatter plots between the princial components.

\section{Task 5: Pearson and Kendall's Tau Correlation Tables}

Correlation tables were calculated with Pandas' "corr" method.

\subsection{Pearson Correlation Table}

\resizebox{\linewidth}{!}{%

\input{pearson}

}

\subsection{Kendall's Tau Correlation Table}

\resizebox{\linewidth}{!}{%

\input{kendallTau}

}
\end{document}